---
title: "Transistor Characteristic Curves"
author: David W. Body
date: 2024-03-10
format: 
  pdf:
    include-in-header:
      - text: |
          \usepackage{circuitikz}
          \usepackage{siunitx}
    latex-auto-install: false
editor: source
---

This note documents how to measure transistor characteristic curves using an oscilloscope.

First construct the following circuit:

```{=tex}
\begin{circuitikz}[american]
\draw (0,1) [battery, v=$V_1$] to (0,0) node[ground]{};
\draw (0,1) |- (0,2) to [R, l^=$R_B$, a_=\SI{33}{k\ohm}] (2,2);
\draw (3,2) node[npn](npn1) {Q1}
  (npn1.base) node[anchor=east] {}
  (npn1.collector) node[anchor=south] {}
  (npn1.emitter) node[anchor=north] {}
;
\draw (npn1.base) to (2,2);
\draw (npn1.emitter) to (3,0) node[ground]{};
\draw (npn1.collector) to [R, l=$R_C$, a=\SI{100}{\ohm}] (3,5) |- (5,5) to [sV=$V_2$] (5,3) to (5,2) node[ground]{};
\end{circuitikz}
```
Here is a representative set of waveforms from the oscilloscope.

![Waveforms when VI = 2.5 V](RigolDS%202.5V0.png)

Here is the code we use to produce the transistor characteristic curves:

```{r message=FALSE, warning=FALSE}
library(tidyverse)
```

```{r message=FALSE, warning=FALSE}
V1_05 <- read_csv("2N3904/RigolDS0.csv", col_types = "dd??")
V1_05$V1 <- 0.5

V1_10 <- read_csv("2N3904/RigolDS1.csv", col_types = "dd??")
V1_10$V1 <- 1.0

V1_15 <- read_csv("2N3904/RigolDS2.csv", col_types = "dd??")
V1_15$V1 <- 1.5

V1_20 <- read_csv("2N3904/RigolDS3.csv", col_types = "dd??")
V1_20$V1 <- 2.0

V1_25 <- read_csv("2N3904/RigolDS4.csv", col_types = "dd??")
V1_25$V1 <- 2.5

V1_30 <- read_csv("2N3904/RigolDS5.csv", col_types = "dd??")
V1_30$V1 <- 3.0

V1_35 <- read_csv("2N3904/RigolDS6.csv", col_types = "dd??")
V1_35$V1 <- 3.5

V1_40 <- read_csv("2N3904/RigolDS7.csv", col_types = "dd??")
V1_40$V1 <- 4.0

V1_45 <- read_csv("2N3904/RigolDS8.csv", col_types = "dd??")
V1_45$V1 <- 4.5

V1_50 <- read_csv("2N3904/RigolDS9.csv", col_types = "dd??")
V1_50$V1 <- 5.0

t_df <- rbind(V1_05, V1_10, V1_15, V1_20, V1_25,
              V1_30, V1_35, V1_40, V1_45, V1_50)
```

```{r echo=TRUE, warning=FALSE}
t_df |>
  mutate(IB = as.factor(round((V1 / 33000)*1e6)),
         IC = ((CH1V - CH2V)/100)*1000, VCE = CH2V) |>
  ggplot(aes(VCE, IC, color = IB)) +
  geom_line() +
  labs(title = "Transistor characteristic curves",
       subtitle = "2N3904",
       x = expression(paste(V[CE], " (V)")),
       y = expression(paste(I[C], " (mA)")),
       color = expression(paste(I[B], " (Î¼A)"))) +
  theme_minimal()
```
